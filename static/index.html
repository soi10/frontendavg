<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
	<meta name="author" content="AdminKit">
	<meta name="keywords"
		content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">

	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link rel="shortcut icon" href="img/icons/icon-48x48.png" />

	<link rel="canonical" href="https://demo-basic.adminkit.io/" />

	<title>AdminKit Demo - Bootstrap 5 Admin Template</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

	<link href="css/app.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

	<link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/ui-lightness/jquery-ui.css"
		rel="stylesheet" />

	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
</head>

<body>
	<div class="wrapper">
		<nav id="sidebar" class="sidebar js-sidebar">
			<div class="sidebar-content js-simplebar">
				<a class="sidebar-brand" href="index.html">
					<span class="align-middle">AdminKit</span>
				</a>

				<ul class="sidebar-nav">
					<li class="sidebar-header">
						Pages
					</li>

					<li class="sidebar-item active">
						<a class="sidebar-link" href="index.html">
							<i class="align-middle" data-feather="sliders"></i> <span
								class="align-middle">1.คำนวน</span>
						</a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="holiday.html">
							<i class="align-middle" data-feather="user"></i> <span
								class="align-middle">2.เพิ่มวันหยุด</span>
						</a>
					</li>

		</nav>

		<div class="main">
			<nav class="navbar navbar-expand navbar-light navbar-bg">
				<a class="sidebar-toggle js-sidebar-toggle">
					<i class="hamburger align-self-center"></i>
				</a>

				<div class="navbar-collapse collapse">
					<ul class="navbar-nav navbar-align">
						<li class="nav-item dropdown">
							<a class="nav-icon dropdown-toggle d-inline-block d-sm-none" href="#"
								data-bs-toggle="dropdown">
								<i class="align-middle" data-feather="settings"></i>
							</a>

							<a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#"
								data-bs-toggle="dropdown">
								<img src="img/avatars/avatar.jpg" class="avatar img-fluid rounded me-1"
									alt="Charles Hall" /> <span class="text-dark">Charles Hall</span>
							</a>
							<div class="dropdown-menu dropdown-menu-end">
								<a class="dropdown-item" href="pages-profile.html"><i class="align-middle me-1"
										data-feather="user"></i> Profile</a>
								<a class="dropdown-item" href="#"><i class="align-middle me-1"
										data-feather="pie-chart"></i> Analytics</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="index.html"><i class="align-middle me-1"
										data-feather="settings"></i> Settings & Privacy</a>
								<a class="dropdown-item" href="#"><i class="align-middle me-1"
										data-feather="help-circle"></i> Help Center</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="#">Log out</a>
							</div>
						</li>
					</ul>
				</div>
			</nav>

			<main class="content">
				<div class="container-fluid p-0">
					
					<div id="page1" class="my-2">
						<div class="container-fluid p-0">

							<h1 class="h3 mb-3">กรอกข้อมูลผู้ใช้ไฟฟ้า</h1>
							<div class="row">
								<div class="col-12 col-lg-12 col-xxl-12 d-flex">
									<div class="card flex-fill">
										<div class="card-body">
												<div class="row">
													<div class="col-3">
														<div class="mb-3">
															<label for="formFile" class="form-label">ระบุการไฟฟ้า</label>
															<select class="form-select mb-3" id="contractor">
																<option value="">--เลือกข้อมูล--</option>
															</select>
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-3">
														<div class="mb-3">
															<label for="formFile" class="form-label">หมายเลขผู้ใช้ไฟฟ้า</label>
															<input type="text" class="form-control" id="" placeholder="0200xxxxx">
														</div>
													</div>
													<div class="col-2">
														<div class="mb-3">
															<label for="formFile" class="form-label">ตัวคูณ</label>
															<input type="text" class="form-control" id="" placeholder="">
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-3">
														<div class="mb-3">
															<label for="formFile" class="form-label">ชื่อ</label>
															<input type="text" class="form-control" id="" placeholder="ชื่อ">
														</div>
													</div>
													<div class="col-2">
														<div class="mb-3">
															<label for="formFile" class="form-label">อัตรา</label>
															<select class="form-select mb-3" id="contractor">
																<option value="">--เลือกข้อมูล--</option>
															</select>
														</div>
													</div>
												</div>
												<div class="row">
													<div class="col-3">
														<div class="mb-3">
															<label for="formFile" class="form-label">PEA No.</label>
															<input type="text" class="form-control" id="" placeholder="pea no">
														</div>
													</div>
													<div class="col-2">
														<div class="mb-3">
															<label for="formFile" class="form-label">รอบบิลที่ต้องการทำการเฉลี่ย</label>
															<select class="form-select mb-3" id="contractor">
																<option value="">--เลือกข้อมูล--</option>
															</select>
														</div>
													</div>
												</div>
		
										</div>
									</div>
								</div>
							</div>
		
						</div>
						<div class="row">
							<div class="col">
								<!-- <button type="button" class="btn btn-secondary" id="back1">กลับ</button> -->
							</div>
							<div class="col">
								<button type="button" class="btn btn-facebook float-end" id="next1">
									<i class="align-middle me-2" data-feather="arrow-right-circle"></i> <span class="align-middle">ต่อไป</span>
								</button>
							</div>
						</div>
					</div>
					<div id="page2" class="my-2">
						<div class="container-fluid p-0">
							<div class="row">
								<div class="col d-flex justify-content-center">
									<div class="card flex-fill">
										<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="mb-3">
															<label for="formFile" class="form-label">กรณีชำรุด</label>
															<select class="form-select mb-3" id="case-ex" onchange="showDiv(this)">
																<option selected  value="0">--เลือกข้อมูล--</option>
																<option value="1">เฉลี่ยจากข้อมูลในรอบบิลเดียวกัน (ข้อมูลที่เริ่มชำรุด และสับเปลี่ยนทันภายในเดือน)
																</option>
																<option value="2">เฉลี่ยจากสถิติการใช้ไฟฟ้า
																</option>
																<option value="3">เฉลี่ยจากเปอร์เซ็นความคลาดเคลื่อยของมิเตอร์
																</option>
															</select>
														</div>
													</div>
												</div>
		
										</div>
									</div>
								</div>
							</div>
		
						</div>
						<div id="1" style="display:none;">
							<div class="container-fluid p-0">
								<h1 class="h3 mb-3">ข้อมูลช่วงที่ชำรุด</h1>
								<div class="row">
									<div class="col d-flex justify-content-center">
										<div class="card flex-fill">
											<div class="card-body">
													<div class="row">
														<div class="col-3">
															<div class="card-header">
																<h5 class="card-title mb-0">ช่วงปกติ</h5>
															</div>
															<div class="mb-3">
																<label for="start-date">วันที่เริ่มต้น:</label>
																<input class="form-control" type="text" id="start-date-normal" name="start-date-normal" />
																<br />
																<label for="end-date">วันที่สิ้นสุด:</label>
																<input class="form-control" type="text" id="end-date-normal" name="end-date-normal" />
															</div>
														</div>
														<div class="col-3">
															<div class="card-header">
																<h5 class="card-title mb-0">ช่วงชำรุด</h5>
															</div>
															<div class="mb-3">
																<label for="start-date">วันที่เริ่มต้น:</label>
																<input class="form-control" type="text" id="start-date-not" name="start-date-not" />
																<br />
																<label for="end-date">วันที่สิ้นสุด:</label>
																<input class="form-control" type="text" id="end-date-not" name="end-date-not" />
															</div>
														</div>
													</div>
													<div class="row">
														<div class="container text-center">
															<div class="row row-cols-auto">
															<div class="col">
																<button type="button" class="btn btn-facebook my-2" id="submit-btn" name="#submit-btn">
																	<i class="align-middle me-2" data-feather="check-circle"></i> <span class="align-middle">ดำเนินการ</span>
																</button>
															</div>
															</div>
														</div>											
													</div>
													<div class="row">
														<div class="col-3">
															<div id="result"></div>
															<div id="result1"></div>
															<div id="result2"></div>
														</div>
														<div class="col-3">
															
															<div id="result-countDay-not"></div>
															<div id="result-workDay-not"></div>
															<div id="result-offkDay-not"></div>
															
														</div>
													</div>
			
											</div>
										</div>
									</div>
								</div>
			
							</div>
						</div>
<!--
						<div class="container-fluid p-0">
							<h1 class="h3 mb-3">ข้อมูลช่วงที่ชำรุด</h1>
							<div class="row">
								<div class="col d-flex justify-content-center">
									<div class="card flex-fill">
										<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="mb-3">
															<label for="formFile" class="form-label">กรณีชำรุด</label>
															<select class="form-select mb-3" id="contractor">
																<option value="">--เลือกข้อมูล--</option>
															</select>
														</div>
													</div>
												</div>
		
										</div>
									</div>
								</div>
							</div>
		
						</div>
-->
<!--
						<div class="container-fluid p-0">
							<h1 class="h3 mb-3">ข้อมูลช่วงที่ชำรุด</h1>
							<div class="row">
								<div class="col d-flex justify-content-center">
									<div class="card flex-fill">
										<div class="card-body">
												<div class="row">
													<div class="col-5">
														<div class="mb-3">
															<label for="start-date">วันที่เริ่มต้น:</label>
															<input class="form-control" type="text" id="start-date" name="start-date" />
															<br />
															<label for="end-date">วันที่สิ้นสุด:</label>
															<input class="form-control" type="text" id="end-date" name="end-date" />
														</div>
													</div>
												</div>
		
										</div>
									</div>
								</div>
							</div>
		
						</div>
-->

<!--
						<div class="row">
							<div class="col">
								<div class="card">
									<h5 class="card-header">วันที่ชำรุด</h5>
									<div class="card-body">
										<label for="start-date">วันที่เริ่มต้น:</label>
										<input class="form-control" type="text" id="start-date" name="start-date" />
										<br />
										<label for="end-date">วันที่สิ้นสุด:</label>
										<input class="form-control" type="text" id="end-date" name="end-date" />
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card">
									<h5 class="card-header">Featured</h5>
									<div class="card-body">
										<label for="start-date">วันที่เริ่มต้น:</label>
										<input class="form-control" type="text" id="start-date-nor"
											name="start-date-nor" />
										<br />
										<label for="end-date">วันที่สิ้นสุด:</label>
										<input class="form-control" type="text" id="end-date-nor" name="end-date-nor" />
									</div>
								</div>
							</div>
						</div>
-->

						
					
						<div id="result"></div>
						<div id="result1"></div>
						<div id="result2"></div>
						<div class="row">
							<div class="col">
								<button type="button" class="btn btn-secondary" id="back2">
									<i class="align-middle me-2" data-feather="arrow-left-circle"></i> <span class="align-middle">กลับ</span>
								</button>
							</div>
							<div class="col">
								<button type="button" class="btn btn-facebook float-end" id="next2">
									<i class="align-middle me-2" data-feather="arrow-right-circle"></i> <span class="align-middle">ต่อไป</span>
								</button>
							</div>
						</div>
					</div>
					<!--end div id="page2"-->
				</div>
			</main>

		</div>
	</div>

	<script src="js/app.js"></script>

</body>

</html>


<script>
    $(document).ready(function () {
      $("#page1").show();
      $("#page2").hide();

      // ใช้ datepicker กับ input ของวันที่เริ่มต้น
      $("#start-date-normal").datepicker({
        dateFormat: "yy-mm-dd", // กำหนดรูปแบบวันที่ให้เป็น yyyy-mm-dd
      });

      // ใช้ datepicker กับ input ของวันที่สิ้นสุด
      $("#end-date-normal").datepicker({
        dateFormat: "yy-mm-dd", // กำหนดรูปแบบวันที่ให้เป็น yyyy-mm-dd
      });

      $("#start-date-not").datepicker({
        dateFormat: "yy-mm-dd", // กำหนดรูปแบบวันที่ให้เป็น yyyy-mm-dd
      });

      // ใช้ datepicker กับ input ของวันที่สิ้นสุด
      $("#end-date-not").datepicker({
        dateFormat: "yy-mm-dd", // กำหนดรูปแบบวันที่ให้เป็น yyyy-mm-dd
      });
    });

    $("#next1").click(function () {
      $("#page1").hide();
      $("#page2").show();
    });

	$("#back2").click(function () {
      $("#page1").show();
      $("#page2").hide();
    });

	$("#1").hide();
	function showDiv(select){
		if(select.value==0){
		 document.getElementById('1').style.display = "none";
		} else if(select.value==1){
		 document.getElementById('1').style.display = "block";
		}
	 }

    $("#submit-btn").click(function (event) {
      event.preventDefault(); // ปิดการทำงานของปุ่ม submit หน้า HTML

      // ดึงค่าจาก input ของวันที่เริ่มต้น
      var startDate = $("#start-date-normal").val();

      // ดึงค่าจาก input ของวันที่สิ้นสุด
      var endDate = $("#end-date-normal").val();

        var startDateNor = $("#start-date-not").val();

        var endDateNor = $("#end-date-not").val();
		

      $.ajax({
        url: "http://localhost:442/day/calculate-days",
        type: "POST",
        data: {
          "start-date": startDate,
          "end-date": endDate,
          "start-date-nor": startDateNor,
          "end-date-nor": endDateNor,
        },
        success: function (data) {
          // แสดงผลลัพธ์จำนวนวันที่คำนวณได้
          console.log(data);
          $("#result").text("จำนวนวันที่ระบุ: " + data.countDay + " วัน");
          $("#result1").text("จำนวนวันธรรมดา: " + data.workDay + " วัน");
          $("#result2").text("จำนวนวันหยุด: " + data.offkDay + " วัน");
		  $("#result-countDay-not").text("จำนวนวันที่ระบุ: " + data.countDayNor + " วัน");
          $("#result-workDay-not").text("จำนวนวันธรรมดา: " + data.workDayNor + " วัน");
          $("#result-offkDay-not").text("จำนวนวันหยุด: " + data.offkDayNor + " วัน");
        },
      });

      // $.ajax({
      //     url: "http://localhost:442/day/calculate-daysh",
      //     type: "POST",
      //     data: {
      //         "start-date": startDate,
      //         "end-date": endDate,
      //     },
      //     success: function (data) {
      //         // แสดงผลลัพธ์จำนวนวันที่คำนวณได้
      //         $('#result1').text('จำนวนวันหยุด: ' + data + ' วัน');
      //     },
      // });
    });
  </script>